<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>standard component | tvl-contrast-directive</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="vue custom directive checking the contrast ratio">
    <link rel="preload" href="/tvl-contrast-directive/assets/css/0.styles.cb01d033.css" as="style"><link rel="preload" href="/tvl-contrast-directive/assets/js/app.80125d35.js" as="script"><link rel="preload" href="/tvl-contrast-directive/assets/js/2.94ec4b60.js" as="script"><link rel="preload" href="/tvl-contrast-directive/assets/js/10.649576b1.js" as="script"><link rel="preload" href="/tvl-contrast-directive/assets/js/3.bd71f7c8.js" as="script"><link rel="preload" href="/tvl-contrast-directive/assets/js/5.967c0646.js" as="script"><link rel="prefetch" href="/tvl-contrast-directive/assets/js/11.82c41ed4.js"><link rel="prefetch" href="/tvl-contrast-directive/assets/js/4.fa182bed.js"><link rel="prefetch" href="/tvl-contrast-directive/assets/js/6.64ab93b3.js"><link rel="prefetch" href="/tvl-contrast-directive/assets/js/7.cf3ac765.js"><link rel="prefetch" href="/tvl-contrast-directive/assets/js/8.b94e8f44.js"><link rel="prefetch" href="/tvl-contrast-directive/assets/js/9.e9f5da2f.js">
    <link rel="stylesheet" href="/tvl-contrast-directive/assets/css/0.styles.cb01d033.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tvl-contrast-directive/" class="home-link router-link-active"><!----> <span class="site-name">tvl-contrast-directive</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tvl-contrast-directive/guide.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/tvl-contrast-directive/components/" class="nav-link router-link-active">
  Demo
</a></div><div class="nav-item"><a href="https://github.com/gintomikCZ/tvl-contrast-directive" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tvl-contrast-directive/guide.html" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/tvl-contrast-directive/components/" class="nav-link router-link-active">
  Demo
</a></div><div class="nav-item"><a href="https://github.com/gintomikCZ/tvl-contrast-directive" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="standard-component"><a href="#standard-component" class="header-anchor">#</a> standard component</h1> <p>tady nejakej text</p> <div component-name="examples-standard-component" class="demo-wrap"><div class="container"><h3>1</h3> <p>First container has both - text color and background color set by a css class. The contrast ratio meets both WCAG standards.</p> <div class="boxes first-div"><div><span>background: </span><b>#2C0703</b></div> <div><span>text color: </span><b>#DA9F93</b></div></div></div> <div class="container"><h3>2</h3> <p>The value of background css property is set to transparent for this container. The directive in this case calculates wih the closest ancestor value which is the background color of this page section - #efefef. The contrast ratio meets the AA criteria level, but it is not sufficient for AAA level.</p> <div class="boxes second-div"><div><span>background: </span><b>transparent</b></div> <div><span>text color: </span><b>#B6465F</b></div></div></div> <div class="container"><h3>3</h3> <p>The color of text in this div has not been set by CSS on the element itself. The value inherited from document body element applies in this case and it is also used in the contrast ratio calculation. However the contrast is really poor, it doesn't meet the WCAG standards.</p> <div class="boxes third-div"><div><span>background: </span><b>#eb4511</b></div> <div><span>text color: </span><b>#2c3e50 (inherited)</b></div></div></div>Â¨
</div> <div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">hexToRgb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">col</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> color <span class="token operator">=</span> col<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'#'</span> <span class="token operator">?</span> col<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> col
  <span class="token keyword">return</span> color<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/.{1,2}/g</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">rgbStringToArray</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> str <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'error converting color rgb to hex. value: '</span> <span class="token operator">+</span> str<span class="token punctuation">)</span>
  <span class="token keyword">const</span> splited <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> rgb <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  rgb<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>splited<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\D/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  rgb<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>splited<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\D/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  rgb<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>splited<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\D/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> rgb
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">getUniqueId</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token string">'_'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> a <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">rgbToHex</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">rgb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ar <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>rgb<span class="token punctuation">)</span> <span class="token operator">?</span> rgb <span class="token operator">:</span> <span class="token function">rgbStringToArray</span><span class="token punctuation">(</span>rgb<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">toHex</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hex <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> hex<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> hex <span class="token operator">:</span> hex
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">'#'</span> <span class="token operator">+</span> <span class="token function">toHex</span><span class="token punctuation">(</span>ar<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">toHex</span><span class="token punctuation">(</span>ar<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">toHex</span><span class="token punctuation">(</span>ar<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">luminance</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">col</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rgb <span class="token operator">=</span> <span class="token function">hexToRgb</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>
  <span class="token keyword">const</span> ar <span class="token operator">=</span> rgb<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    v <span class="token operator">/=</span> <span class="token number">255</span>
    <span class="token keyword">return</span> v <span class="token operator">&lt;=</span> <span class="token number">0.03928</span> <span class="token operator">?</span> v <span class="token operator">/</span> <span class="token number">12.92</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v <span class="token operator">+</span> <span class="token number">0.055</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1.055</span><span class="token punctuation">,</span> <span class="token number">2.4</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> ar<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.2126</span> <span class="token operator">+</span> ar<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.7152</span> <span class="token operator">+</span> ar<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.0722</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">contrast</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">col1<span class="token punctuation">,</span> col2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> lum1 <span class="token operator">=</span> <span class="token function">luminance</span><span class="token punctuation">(</span>col1<span class="token punctuation">)</span>
  <span class="token keyword">const</span> lum2 <span class="token operator">=</span> <span class="token function">luminance</span><span class="token punctuation">(</span>col2<span class="token punctuation">)</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> lum1 <span class="token operator">&gt;</span> lum2 <span class="token operator">?</span> <span class="token punctuation">(</span>lum1 <span class="token operator">+</span> <span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>lum2 <span class="token operator">+</span> <span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>lum2 <span class="token operator">+</span> <span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>lum1 <span class="token operator">+</span> <span class="token number">0.05</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> result<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">getColorPropertyFromEl</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> val <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span>
  <span class="token keyword">return</span> val <span class="token operator">===</span> <span class="token string">'rgba(0, 0, 0, 0)'</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> val
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">getColorProperty</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> elem <span class="token operator">=</span> el
  <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">getColorPropertyFromEl</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> property<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token keyword">return</span> v
  <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'body'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">do</span> <span class="token punctuation">{</span>
    elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentElement
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elem<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    v <span class="token operator">=</span> <span class="token function">getColorPropertyFromEl</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> property<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>v <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>tagName <span class="token operator">!==</span> <span class="token string">'BODY'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">return</span> v
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">getRatio</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    headerColor<span class="token operator">:</span> <span class="token string">'#2c2c2c'</span><span class="token punctuation">,</span>
    bodyColor<span class="token operator">:</span> <span class="token string">'#efefef'</span><span class="token punctuation">,</span>
    header<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    message1<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    message2<span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> bg <span class="token operator">=</span> <span class="token function">getColorProperty</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'background-color'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bg<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'unknown background'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bg<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> bg <span class="token operator">=</span> <span class="token function">rgbToHex</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
    <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token function">getColorProperty</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>color<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'unknown color'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'rgb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> color <span class="token operator">=</span> <span class="token function">rgbToHex</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span>
    <span class="token keyword">const</span> contr <span class="token operator">=</span> <span class="token function">contrast</span><span class="token punctuation">(</span>bg<span class="token punctuation">,</span> color<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>contr <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> contr <span class="token operator">!==</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    obj<span class="token punctuation">.</span>message1 <span class="token operator">=</span> <span class="token string">'contrast ratio: '</span> <span class="token operator">+</span> contr
    obj<span class="token punctuation">.</span>message2 <span class="token operator">=</span> <span class="token string">'('</span> <span class="token operator">+</span> color <span class="token operator">+</span> <span class="token string">' on '</span> <span class="token operator">+</span> bg <span class="token operator">+</span> <span class="token string">')'</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contr <span class="token operator">&gt;=</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">.</span>headerColor <span class="token operator">=</span> <span class="token string">'#12432f'</span><span class="token punctuation">,</span>
        obj<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token string">'OK - AAA level'</span><span class="token punctuation">,</span>
        obj<span class="token punctuation">.</span>bodyColor <span class="token operator">=</span> <span class="token string">'#ddf6ec'</span>
      <span class="token keyword">return</span> obj
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contr <span class="token operator">&gt;=</span> <span class="token number">4.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">.</span>headerColor <span class="token operator">=</span> <span class="token string">'#e56717'</span>
      obj<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token string">'OK - AA level only'</span>
      obj<span class="token punctuation">.</span>bodyColor <span class="token operator">=</span> <span class="token string">'#f5deb3'</span>
      <span class="token keyword">return</span> obj
    <span class="token punctuation">}</span>
    obj<span class="token punctuation">.</span>headerColor <span class="token operator">=</span> <span class="token string">'#b70023'</span><span class="token punctuation">,</span>
      obj<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token string">'LOW CONTRAST'</span><span class="token punctuation">,</span>
      obj<span class="token punctuation">.</span>bodyColor <span class="token operator">=</span> <span class="token string">'#ffe9ef'</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>message1 <span class="token operator">=</span> err<span class="token punctuation">.</span>message <span class="token operator">||</span> <span class="token string">'unknown error'</span>
    obj<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token string">'error'</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">bind</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">getRatio</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
      <span class="token keyword">const</span> wrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> field <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> wrapStyles <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">'border-radius: 3px'</span><span class="token punctuation">,</span>
        <span class="token string">'border: 1px solid #dadada'</span><span class="token punctuation">,</span>
        <span class="token string">'box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)'</span><span class="token punctuation">,</span>
        <span class="token string">'display: flex'</span><span class="token punctuation">,</span>
        <span class="token string">'flex-direction: column'</span><span class="token punctuation">,</span>
        <span class="token string">'font-family: inherit'</span><span class="token punctuation">,</span>
        <span class="token string">'left: 0'</span><span class="token punctuation">,</span>
        <span class="token string">'overflow: hidden'</span><span class="token punctuation">,</span>
        <span class="token string">'position: absolute'</span><span class="token punctuation">,</span>
        <span class="token string">'top: calc(100% + 2px)'</span><span class="token punctuation">,</span>
        <span class="token string">'z-index: 9'</span>
      <span class="token punctuation">]</span>
      <span class="token keyword">const</span> headerStyles <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">'background: '</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>headerColor<span class="token punctuation">,</span>
        <span class="token string">'color: #ffffff'</span><span class="token punctuation">,</span>
        <span class="token string">'font-size: 12px'</span><span class="token punctuation">,</span>
        <span class="token string">'font-weight: 600'</span><span class="token punctuation">,</span>
        <span class="token string">'line-height: 1'</span><span class="token punctuation">,</span>
        <span class="token string">'padding: 4px'</span><span class="token punctuation">,</span>
        <span class="token string">'text-transform: uppercase'</span>
      <span class="token punctuation">]</span>
      <span class="token keyword">const</span> fieldStyles <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">'background: '</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>bodyColor<span class="token punctuation">,</span>
        <span class="token string">'color: #161616'</span><span class="token punctuation">,</span>
        <span class="token string">'display: flex'</span><span class="token punctuation">,</span>
        <span class="token string">'flex-direction: column'</span><span class="token punctuation">,</span>
        <span class="token string">'font-size: 12px'</span><span class="token punctuation">,</span>
        <span class="token string">'font-weight: 400'</span><span class="token punctuation">,</span>
        <span class="token string">'line-height: 1.2'</span><span class="token punctuation">,</span>
        <span class="token string">'padding: 4px'</span>
      <span class="token punctuation">]</span>
      <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">getUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      wrap<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span>
      el<span class="token punctuation">.</span>_tvlContrastId <span class="token operator">=</span> id
      wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> wrapStyles<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'; '</span><span class="token punctuation">)</span>
      header<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> headerStyles<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'; '</span><span class="token punctuation">)</span>
      field<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> fieldStyles<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'; '</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> span1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> span1Text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>message1<span class="token punctuation">)</span>
      span1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span1Text<span class="token punctuation">)</span>
      field<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span1<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>message2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        span1<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginBottom <span class="token operator">=</span> <span class="token string">'4px'</span>
        <span class="token keyword">const</span> span2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> span2Text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>message2<span class="token punctuation">)</span>
        span2<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span2Text<span class="token punctuation">)</span>
        field<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span2<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> headerText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
      header<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>headerText<span class="token punctuation">)</span>
      wrap<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span>
      wrap<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span>
      <span class="token keyword">const</span> pos <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'position'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pos <span class="token operator">||</span> pos <span class="token operator">===</span> <span class="token string">'static'</span><span class="token punctuation">)</span> el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position<span class="token operator">=</span><span class="token string">'relative'</span>
      el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>wrap<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">unbind</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'_tvlContrastId'</span> <span class="token keyword">in</span> el<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> el<span class="token punctuation">.</span>_tvlContrastId
    <span class="token keyword">const</span> child <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>child<span class="token punctuation">)</span> <span class="token keyword">return</span> 
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>


<span class="token punctuation">}</span></code></pre></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/5/2020, 1:28:57 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/tvl-contrast-directive/assets/js/app.80125d35.js" defer></script><script src="/tvl-contrast-directive/assets/js/2.94ec4b60.js" defer></script><script src="/tvl-contrast-directive/assets/js/10.649576b1.js" defer></script><script src="/tvl-contrast-directive/assets/js/3.bd71f7c8.js" defer></script><script src="/tvl-contrast-directive/assets/js/5.967c0646.js" defer></script>
  </body>
</html>
